@tailwind base;
@tailwind components;
@tailwind utilities;

/* Typography + variables */
:root {
  --app-font: "Atkinson Hyperlegible", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans";
  --round-1: #F4A261;
  --round-2: #7FB3FF;
  --round-3: #F7A8C0;
  --round-4: #9EE6B4;
  --round-5: #F7D57A;
  
  /* Quiz theme tokens - dynamically updated per question */
  --quiz-accent: #FFD84D;
  --quiz-on-accent: #0B0B0B;
  --quiz-surface: #0B0B0B;
  --quiz-on-surface: #FFFFFF;
  --quiz-ring: #2F6FEB;
  
  /* Fluid spacing scale */
  --space-0_5: clamp(4px, 0.25vw, 6px);
  --space-1:   clamp(8px, 0.6vw, 14px);
  --space-2:   clamp(12px, 1vw, 18px);
  --space-3:   clamp(16px, 1.6vw, 26px);
  --space-4:   clamp(22px, 2.2vw, 36px);
  --space-6:   clamp(30px, 3.2vw, 64px);
  --space-8:   clamp(36px, 3.3vw, 64px);

  --gutter: var(--space-3);
  --maxw-reading: 78ch;
  --maxw: 90ch;
  
  /* Quiz theme - overridden per quiz */
  --quiz: #111;
}

html[data-font="dyslexic"] { 
  --app-font: "OpenDyslexic", var(--app-font); 
}

html { 
  font-family: var(--app-font); 
}

.prose { 
  max-width: 70ch; 
}

[data-motion="off"] * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* View Transitions for quiz card â†’ intro animation */
@view-transition {
  navigation: auto;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.3s;
}

/* Custom animation for quiz cards expanding to full screen */
[style*="view-transition-name: quiz-"] {
  view-transition-name: var(--quiz-transition-name);
}

::view-transition-old(quiz),
::view-transition-new(quiz) {
  animation-duration: 0.4s;
  animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
}

/* Smooth morph from card to full screen */
::view-transition-group(*) {
  animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
}

/* Utility classes for consistent spacing and layout */
@layer utilities {
  /* Respect device cut-outs */
  .quiz-safe {
    padding: env(safe-area-inset-top) env(safe-area-inset-right)
             env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  /* Balance long headings */
  .text-balance { 
    text-wrap: balance; 
  }

  /* Prevent layout shift on icons/buttons */
  .icon-btn { 
    inline-size: 44px; 
    block-size: 44px; 
    display: grid; 
    place-items: center; 
  }
  
  /* Quiz surface with theme colour */
  .quiz-surface {
    background: var(--quiz);
  }
}
